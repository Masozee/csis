{% extends 'web/base.html' %}
{% load static %}

{% block OG %}    <!-- Open Graph / Facebook -->
    <title>CSIS Events</title>
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.get_full_path }}">
    <meta property="og:title" content="Centre for Strategic and International Studies">
    <meta property="og:description" content="The Centre for Strategic and International Studies (CSIS) in Jakarta is an independent, non-profit organisation focusing on policy-oriented studies on domestic and international issues. It was established in 1971.">
    <meta property="og:image" content="https://s3-csis-web.s3.amazonaws.com/static/web/logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="CSIS Events">
    <meta property="twitter:url" content="{{ request.get_full_path }}">
    <meta property="twitter:title" content="Centre for Strategic and International Studies">
    <meta property="twitter:description" content="The Centre for Strategic and International Studies (CSIS) in Jakarta is an independent, non-profit organisation focusing on policy-oriented studies on domestic and international issues. It was established in 1971.">
    <meta property="twitter:image" content="https://s3-csis-web.s3.amazonaws.com/static/web/logo.png">
        <!-- Document title -->
{% endblock OG%}

    {% block content %}
        <section id="page-title" style="background-image: linear-gradient(90deg, rgba(3,1,2,1) 10%, rgba(34,23,17,0.24693627450980393) 72%), url('https://s3-csis-web.s3.ap-southeast-1.amazonaws.com/static/web/IMG_3881.jpeg');">
            <div class="container">
                <div class="page-title text-white text-center" >
                    <h2>EVENTS</h2>
                </div>
                
            </div>
        </section>
        <section id="page-content">
            <div class="container">
            <form method="get" formaction="/events/filter/" >
               <div class="row m-b-20 grey-bg">

                    <div class="col-lg-3 p-t-10 m-b-20">
                        <h3 class="m-b-20">CSIS Events and Webinar</h3>

                    </div>

                    <div class="col-lg-3">
                        <div class="order-select">
                            <h6>filter by Researcher</h6>

                            <select class="form-select" name="author_contains" id="author_contains">
                                    <option value="" selected="selected">----</option>
                                    {% for a in Scholars %}
                                    <option value="{{a.name}}">{{a.name}}</option>
                                    {% endfor %}
                                </select>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="order-select">
                            <h6>filter by Department</h6>
                             <select class="form-select" name="dept_contains" id="dept_contains">
                                    <option value="" selected="selected">----</option>
                                    {% for a in Dept%}
                                    <option value="{{a.name}}">{{a.name}}</option>
                                    {% endfor %}
                                </select>
                        </div>
                    </div>
                     <div class="col-lg-3">
                        <div class="order-select">
                            <h6>Search</h6>

                            <button  type="submit" value="search" formaction="/events/filter/" class="btn btn-primary btn-block side-video">Submit</button>
                        </div>
                    </div>

                </div>
            </form>
                <hr>
                <!-- Blog -->
                <div id="blog" class="grid-layout post-thumbnails m-b-30 pt-5" data-item="post-item">
                    {% for a in acara %}<!-- Post item-->
                    <div class="post-item border">
                            <div class="row">
                                <div class="col-lg-2 col-md-2">
                                    <h4>{{a.date_start |date:"d b Y"}}</h4>
                                    <small>{{a.time_start |time:'H:i'}} - {{a.time_end |time:'H:i'}} (UTC+7)</small>
                                </div>
                                <div class="col-lg-6 col-md-6">
                                    
                                        <h4><a href="/event/{{a.title | slugify }}">{{a.title}}</a></h4>
                                        <p>{{a.description | safe | truncatewords_html:30 }}</p>
                                        <a href="/event/{{a.title| slugify }}" class="item-link">Read More <i class="icon-chevron-right"></i></a>
                                        <hr>
                                        {% if a.speaker.all %}
                                        <h5><b>Speakers</b></h5>
                                        <p>{% for b in a.speaker.all %} {% if forloop.first %}{% else %}{% if forloop.last %} and {% else %}, {% endif %}{% endif %}{{b.name}} {% endfor %}</p>
                                        {% endif %}

                                </div>
                                <div class="col-lg-4 col-md-4">
                                        <a href="/event/{{a.title | slugify }}">
                                            <img alt="" style="max-width: 75%;" src="https://s3-csis-web.s3.ap-southeast-1.amazonaws.com/{{a.image}}">
                                        </a>
                                </div>
                                <div class="hs"></div>
                            </div>
                    </div>
                    {% endfor %}
                </div>
                
                    <!-- end: Post item-->
                    
                    <!-- Post item-->
                    
            
            
                <!-- end: Blog -->
                <!-- Pagination -->
                <ul class="pagination">
                     {% if acara.has_previous %}
                        <li class="page-item"><a class="page-link" href="?page={{ acara.previous_page_number }}">« Previous page</a></li>

                      {% if acara.number > 3 %}
                          <li class="page-item"><a class="page-link" href="?page=1">1</a></li>
                        {% if acara.number > 4 %}
                            <li class="page-item"><span class="page-link">...</span></li>
                        {% endif %}
                      {% endif %}
                    {% endif %}
                    
                    {% for num in acara.paginator.page_range %}
                      {% if acara.number == num %}
                          <li class="page-item active"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
                      {% elif num > acara.number|add:'-2' and num < acara.number|add:'2' %}
                          <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
                      {% endif %}
                    {% endfor %}
                    
                    {% if acara.has_next %}
                      {% if acara.number < acara.paginator.num_pages|add:'-3' %}
                          <li class="page-item"><span class="page-link">...</span></li>
                          <li class="page-item"><a class="page-link" href="?page={{ acara.paginator.num_pages }}">{{ acara.paginator.num_pages }}</a></li>
                      {% elif acara.number < acara.paginator.num_pages|add:'-2' %}
                          <li class="page-item"><a class="page-link" href="?page={{ acara.paginator.num_pages }}">{{ acara.paginator.num_pages }}</a></li>
                      {% endif %}
                    
                        <li class="page-item"><a class="page-link" href="?page={{ acara.next_page_number }}">Next Page »</a></li>
                    {% endif %}
                

                </ul>
                <!-- end: Pagination -->
            </div>
        </section>
{% endblock %}